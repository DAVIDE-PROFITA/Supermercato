
<html>
<head>
    <meta charset="UTF-8">
    <title>Prodotti Supermercato</title>
    <style>
        table {
            width: 80%;
            border-collapse: collapse;
            margin: 20px auto;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>

<h2>Prodotti Supermercato</h2>

<table id="t1"></table>
<input id="b2" type="text" placeholder="Cerca prodotto"> 

<input id="b1" type="button" onclick="LetturaFile();" value="Stampa Tabella Prodotti"> 
<br> 

<script>
    function LetturaFile() {
        let xhr = new XMLHttpRequest();
        
        xhr.open("GET", "http://localhost/supermercato.json", true);
        
        xhr.onload = function() {
            if (xhr.status === 200) {
                const oggetto = JSON.parse(xhr.responseText);
                
               
                const pagineCibi = [
                    "sonyBravia.html",
                ];
                
                let str = "<tr><th>Nome</th><th>Tipologia</th><th>Prezzo</th><th>Descrizione</th>><th>Quantit√†</th><th>Maggiori dettagli</th><th>Totale</th></tr>";
                
                for(let i = 0; i < oggetto.magazzino.length; i++) {
                    const totale = oggetto.magazzino[i].guadagno * oggetto.magazzino[i].quantita;
                    
                    const urlLink = pagineCibi [i % pagineCibi.length];
                    
                    str += "<tr><td>" + oggetto.magazzino[i].nome + 
                            "</td><td>" + oggetto.magazzino[i].tipologia + 
                            "</td><td>" + oggetto.magazzino[i].prezzo + 
                            "</td><td>" + oggetto.magazzino[i].prezzo_vendita + 
                            "</td><td>" + oggetto.magazzino[i].prezzo_acquisto + 
                            "</td><td>" + oggetto.magazzino[i].guadagno + 
                            "</td><td>" + oggetto.magazzino[i].quantita + 
                            "</td><td><a href='" + urlLink + "' target='_blank'>Maggiori dettagli</a></td>" + 
                            "<td>" + totale + "</td></tr>";
                }

                document.getElementById("t1").innerHTML = str;
            } else {
                alert("Errore nel caricamento del file JSON.");
            }
        };

        xhr.send();
    }
</script>

</body>
</html>
